<!doctype html>
<html
        lang="ru"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout.html}"
>
<head>
    <meta charset="UTF-8" />
    <title th:text="${test.name}">Тест</title>
</head>
<body>
<section layout:fragment="content" class="min-h-screen bg-gray-50 py-10 px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl mx-auto bg-white shadow-xl rounded-2xl p-8 border border-gray-200">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2" th:text="${test.name}">Название теста</h1>
            <p class="text-gray-500 text-sm">Ответьте на все вопросы ниже</p>
        </div>

        <form method="post" th:action="@{/tests/submit}" class="space-y-8">

            <input type="hidden" name="testId" th:value="${test.id}" />
            <input type="hidden" name="userUid" th:value="${#authentication.name}" />

            <div
                    th:each="question, qStat : ${test.questions}"
                    class="border border-gray-200 p-6 rounded-xl shadow-sm bg-gray-50"
            >
                <h2 class="text-lg font-medium text-gray-800 mb-4" th:text="${question.name}">Вопрос</h2>

                <input type="hidden" th:name="${'answers[' + qStat.index + '].questionId'}" th:value="${question.id}" />

                <div class="space-y-3">
                    <div th:each="answer : ${question.answers}" class="flex items-start gap-3">
                        <input
                                type="radio"
                                th:name="${'answers[' + qStat.index + '].answerId'}"
                                th:value="${answer.id}"
                                th:id="${'answer__' + answer.id}"
                                class="mt-1 h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"
                                required
                        />
                        <label th:for="${'answer__' + answer.id}" class="text-gray-700 text-base" th:text="${answer.value}">
                            Ответ
                        </label>
                    </div>
                </div>
            </div>

            <div class="flex justify-end">
                <button
                        type="submit"
                        class="inline-flex items-center px-6 py-3 rounded-xl text-white bg-blue-600 hover:bg-blue-700 transition-all text-lg font-semibold shadow"
                >
                    Отправить ответы
                </button>
            </div>
        </form>
    </div>
</section>
</body>
</html>
